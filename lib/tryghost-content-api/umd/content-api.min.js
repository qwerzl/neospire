!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).GhostContentAPI=t()}(this,(function(){"use strict";var e=function e(t){function r(e,t,n){var o,a={};if(Array.isArray(e))return e.concat(t);for(o in e)a[n?o.toLowerCase():o]=e[o];for(o in t){var s=n?o.toLowerCase():o,i=t[o];a[s]=s in a&&"object"==typeof i?r(a[s],i,"headers"==s):i}return a}function n(e,n,o,a,s){var i="string"!=typeof e?(n=e).url:e,d={config:n},c=r(t,n),u={};a=a||c.data,(c.transformRequest||[]).map((function(e){a=e(a,c.headers)||a})),c.auth&&(u.authorization=c.auth),a&&"object"==typeof a&&"function"!=typeof a.append&&"function"!=typeof a.text&&(a=JSON.stringify(a),u["content-type"]="application/json");try{u[c.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp("(^|; )"+c.xsrfCookieName+"=([^;]*)"))[2])}catch(e){}return c.baseURL&&(i=i.replace(/^(?!.*\/\/)\/?/,c.baseURL+"/")),c.params&&(i+=(~i.indexOf("?")?"&":"?")+(c.paramsSerializer?c.paramsSerializer(c.params):new URLSearchParams(c.params))),(c.fetch||fetch)(i,{method:(o||c.method||"get").toUpperCase(),body:a,headers:r(c.headers,u,!0),credentials:c.withCredentials?"include":s}).then((function(e){for(var t in e)"function"!=typeof e[t]&&(d[t]=e[t]);return"stream"==c.responseType?(d.data=e.body,d):e[c.responseType||"text"]().then((function(e){d.data=e,d.data=JSON.parse(e)})).catch(Object).then((function(){return(c.validateStatus?c.validateStatus(e.status):e.ok)?d:Promise.reject(d)}))}))}return t=t||{},n.request=n,n.get=function(e,t){return n(e,t,"get")},n.delete=function(e,t){return n(e,t,"delete")},n.head=function(e,t){return n(e,t,"head")},n.options=function(e,t){return n(e,t,"options")},n.post=function(e,t,r){return n(e,r,"post",t)},n.put=function(e,t,r){return n(e,r,"put",t)},n.patch=function(e,t,r){return n(e,r,"patch",t)},n.all=Promise.all.bind(Promise),n.spread=function(e){return e.apply.bind(e,e)},n.CancelToken="function"==typeof AbortController?AbortController:Object,n.defaults=t,n.create=e,n}();const t="1.11.20",r="v5.0",n=["v2","v3","v4","v5","canary"],o="@tryghost/content-api",a=t=>{let{url:r,method:n,params:o,headers:a}=t;return e[n](r,{params:o,paramsSerializer:e=>Object.keys(e).reduce(((t,r)=>{const n=encodeURIComponent([].concat(e[r]).join(","));return t.concat(`${r}=${n}`)}),[]).join("&"),headers:a})};return function e(s){let i,{url:d,key:c,host:u,version:f,userAgent:l,ghostPath:h="ghost",makeRequest:p=a}=s;if(u&&(console.warn(`${o}: The 'host' parameter is deprecated, please use 'url' instead`),d||(d=u)),this instanceof e)return e({url:d,key:c,version:f,userAgent:l,ghostPath:h,makeRequest:p});if(void 0===f)throw new Error(`${o} Config Missing: 'version' is required. E.g. ${n.join(",")}`);if("boolean"==typeof f)!0===f&&(i=r),f=void 0;else{if(f&&!n.includes(f)&&!f.match(/^v\d+\.\d+/))throw new Error(`${o} Config Invalid: 'version' ${f} is not supported`);"canary"===f?(console.warn(`${o}: The 'version' parameter has a deprecated format 'canary', please use 'v{major}.{minor}' format instead`),i=r):f.match(/^v\d+$/)?(console.warn(`${o}: The 'version' parameter has a deprecated format 'v{major}', please use 'v{major}.{minor}' format instead`),i=`${f}.0`):i=f}if(!d)throw new Error(`${o} Config Missing: 'url' is required. E.g. 'https://site.com'`);if(!/https?:\/\//.test(d))throw new Error(`${o} Config Invalid: 'url' ${d} requires a protocol. E.g. 'https://site.com'`);if(d.endsWith("/"))throw new Error(`${o} Config Invalid: 'url' ${d} must not have a trailing slash. E.g. 'https://site.com'`);if(h.endsWith("/")||h.startsWith("/"))throw new Error(`${o} Config Invalid: 'ghostPath' ${h} must not have a leading or trailing slash. E.g. 'ghost'`);void 0===l&&(l=false);const m=["posts","authors","tags","pages","settings","tiers","newsletters","offers"].reduce(((e,t)=>Object.assign(e,{[t]:{read:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!e||!e.id&&!e.slug)return Promise.reject(new Error(`${o} read requires an id or slug.`));const a=Object.assign({},e,r);return g(t,a,e.id||`slug/${e.slug}`,n)},browse:function(){return g(t,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},null,arguments.length>1?arguments[1]:void 0)}}})),{});return delete m.settings.read,delete m.tiers.read,delete m.newsletters.read,delete m.offers.browse,m;function g(e,r,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!a&&!c)return Promise.reject(new Error(`${o} Config Missing: 'key' is required.`));delete r.id;const s=a?{Authorization:`GhostMembers ${a}`}:{};l&&(s["User-Agent"]="boolean"==typeof l?`GhostContentSDK/${t}`:l),i&&(s["Accept-Version"]=i),r=Object.assign({key:c},r);const u=`${d}/${h}/api${(e=>{let t;t="v5"===e||void 0===e||e.match(/^v5\.\d+/)?"/content/":e.match(/^v\d+\.\d+/)?`/${/^(v\d+)\.\d+/.exec(e)[1]}/content/`:`/${e}/content/`;return t})(f)}${e}/${n?n+"/":""}`;return p({url:u,method:"get",params:r,headers:s}).then((t=>Array.isArray(t.data[e])?1!==t.data[e].length||t.data.meta?Object.assign(t.data[e],{meta:t.data.meta}):t.data[e][0]:t.data[e])).catch((e=>{if(e.response&&e.response.data&&e.response.data.errors){const t=e.response.data.errors[0],r=new Error(t.message),n=Object.keys(t);throw r.name=t.type,n.forEach((e=>{r[e]=t[e]})),r.response=e.response,r.request=e.request,r.config=e.config,r}throw e}))}}}));
//# sourceMappingURL=content-api.min.js.map
