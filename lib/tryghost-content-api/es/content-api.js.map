{"version":3,"file":"content-api.js","sources":["../node_modules/.pnpm/redaxios@0.5.1/node_modules/redaxios/dist/redaxios.module.js","../lib/content-api.js"],"sourcesContent":["export default(function e(t){function n(e,t,r){var a,o={};if(Array.isArray(e))return e.concat(t);for(a in e)o[r?a.toLowerCase():a]=e[a];for(a in t){var i=r?a.toLowerCase():a,u=t[a];o[i]=i in o&&\"object\"==typeof u?n(o[i],u,\"headers\"==i):u}return o}function r(e,r,a,o,i){var u=\"string\"!=typeof e?(r=e).url:e,c={config:r},s=n(t,r),f={};o=o||s.data,(s.transformRequest||[]).map(function(e){o=e(o,s.headers)||o}),s.auth&&(f.authorization=s.auth),o&&\"object\"==typeof o&&\"function\"!=typeof o.append&&\"function\"!=typeof o.text&&(o=JSON.stringify(o),f[\"content-type\"]=\"application/json\");try{f[s.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp(\"(^|; )\"+s.xsrfCookieName+\"=([^;]*)\"))[2])}catch(e){}return s.baseURL&&(u=u.replace(/^(?!.*\\/\\/)\\/?/,s.baseURL+\"/\")),s.params&&(u+=(~u.indexOf(\"?\")?\"&\":\"?\")+(s.paramsSerializer?s.paramsSerializer(s.params):new URLSearchParams(s.params))),(s.fetch||fetch)(u,{method:(a||s.method||\"get\").toUpperCase(),body:o,headers:n(s.headers,f,!0),credentials:s.withCredentials?\"include\":i}).then(function(e){for(var t in e)\"function\"!=typeof e[t]&&(c[t]=e[t]);return\"stream\"==s.responseType?(c.data=e.body,c):e[s.responseType||\"text\"]().then(function(e){c.data=e,c.data=JSON.parse(e)}).catch(Object).then(function(){return(s.validateStatus?s.validateStatus(e.status):e.ok)?c:Promise.reject(c)})})}return t=t||{},r.request=r,r.get=function(e,t){return r(e,t,\"get\")},r.delete=function(e,t){return r(e,t,\"delete\")},r.head=function(e,t){return r(e,t,\"head\")},r.options=function(e,t){return r(e,t,\"options\")},r.post=function(e,t,n){return r(e,n,\"post\",t)},r.put=function(e,t,n){return r(e,n,\"put\",t)},r.patch=function(e,t,n){return r(e,n,\"patch\",t)},r.all=Promise.all.bind(Promise),r.spread=function(e){return e.apply.bind(e,e)},r.CancelToken=\"function\"==typeof AbortController?AbortController:Object,r.defaults=t,r.create=e,r}());\n//# sourceMappingURL=redaxios.module.js.map\n","// Changed to redaxios to add support for Vercel edge functions\nimport axios from 'redaxios';\n\nimport packageInfo from '../package.json';\n\n// @NOTE: this value is dynamically replaced based on browser/node environment\nconst USER_AGENT_DEFAULT = true;\n\nconst packageVersion = packageInfo.version;\n\nconst defaultAcceptVersionHeader = 'v5.0';\nconst supportedVersions = ['v2', 'v3', 'v4', 'v5', 'canary'];\nconst name = '@tryghost/content-api';\n\n/**\n * This method can go away in favor of only sending 'Accept-Version` headers\n * once the Ghost API removes a concept of version from it's URLS (with Ghost v5)\n *\n * @param {string} [version] version in `v{major}` format\n * @returns {string}\n */\nconst resolveAPIPrefix = (version) => {\n    let prefix;\n\n    // NOTE: the \"version.match(/^v5\\.\\d+/)\" expression should be changed to \"version.match(/^v\\d+\\.\\d+/)\" once Ghost v5 is out\n    if (version === 'v5' || version === undefined || version.match(/^v5\\.\\d+/)) {\n        prefix = `/content/`;\n    } else if (version.match(/^v\\d+\\.\\d+/)) {\n        const versionPrefix = /^(v\\d+)\\.\\d+/.exec(version)[1];\n        prefix = `/${versionPrefix}/content/`;\n    } else {\n        prefix = `/${version}/content/`;\n    }\n\n    return prefix;\n};\n\nconst defaultMakeRequest = ({url, method, params, headers}) => {\n    return axios[method](url, {\n        params,\n        paramsSerializer: (parameters) => {\n            return Object.keys(parameters).reduce((parts, k) => {\n                const val = encodeURIComponent([].concat(parameters[k]).join(','));\n                return parts.concat(`${k}=${val}`);\n            }, []).join('&');\n        },\n        headers\n    });\n};\n\n/**\n *\n * @param {Object} options\n * @param {String} options.url\n * @param {String} options.key\n * @param {String} [options.ghostPath]\n * @param {String|Boolean} options.version - a version string like v3, v4, v5 or boolean value identifying presence of Accept-Version header\n * @param {String|Boolean} [options.userAgent] - value controlling the 'User-Agent' header should be sent with a request\n * @param {Function} [options.makeRequest]\n * @param {String} [options.host] Deprecated\n */\nexport default function GhostContentAPI({url, key, host, version, userAgent, ghostPath = 'ghost', makeRequest = defaultMakeRequest}) {\n    /**\n     * host parameter is deprecated\n     * @deprecated use \"url\" instead\n     */\n    if (host) {\n        // eslint-disable-next-line\n        console.warn(`${name}: The 'host' parameter is deprecated, please use 'url' instead`);\n        if (!url) {\n            url = host;\n        }\n    }\n\n    if (this instanceof GhostContentAPI) {\n        return GhostContentAPI({url, key, version, userAgent, ghostPath, makeRequest});\n    }\n\n    if (version === undefined) {\n        throw new Error(`${name} Config Missing: 'version' is required. E.g. ${supportedVersions.join(',')}`);\n    }\n\n    let acceptVersionHeader;\n    if (typeof version === 'boolean') {\n        if (version === true) {\n            acceptVersionHeader = defaultAcceptVersionHeader;\n        }\n        version = undefined;\n    } else if (version && !supportedVersions.includes(version) && !(version.match(/^v\\d+\\.\\d+/))) {\n        throw new Error(`${name} Config Invalid: 'version' ${version} is not supported`);\n    } else {\n        if (version === 'canary') {\n            // eslint-disable-next-line\n            console.warn(`${name}: The 'version' parameter has a deprecated format 'canary', please use 'v{major}.{minor}' format instead`);\n\n            acceptVersionHeader = defaultAcceptVersionHeader;\n        } else if (version.match(/^v\\d+$/)) {\n            // eslint-disable-next-line\n            console.warn(`${name}: The 'version' parameter has a deprecated format 'v{major}', please use 'v{major}.{minor}' format instead`);\n\n            acceptVersionHeader = `${version}.0`;\n        } else {\n            acceptVersionHeader = version;\n        }\n    }\n\n    if (!url) {\n        throw new Error(`${name} Config Missing: 'url' is required. E.g. 'https://site.com'`);\n    }\n    if (!/https?:\\/\\//.test(url)) {\n        throw new Error(`${name} Config Invalid: 'url' ${url} requires a protocol. E.g. 'https://site.com'`);\n    }\n    if (url.endsWith('/')) {\n        throw new Error(`${name} Config Invalid: 'url' ${url} must not have a trailing slash. E.g. 'https://site.com'`);\n    }\n    if (ghostPath.endsWith('/') || ghostPath.startsWith('/')) {\n        throw new Error(`${name} Config Invalid: 'ghostPath' ${ghostPath} must not have a leading or trailing slash. E.g. 'ghost'`);\n    }\n\n    // Commented out because key is handled with api routes\n    // if (key && !/[0-9a-f]{26}/.test(key)) {\n    //     throw new Error(`${name} Config Invalid: 'key' ${key} must have 26 hex characters`);\n    // }\n\n    if (userAgent === undefined) {\n        userAgent = USER_AGENT_DEFAULT;\n    }\n\n    const api = ['posts', 'authors', 'tags', 'pages', 'settings', 'tiers', 'newsletters', 'offers'].reduce((apiObject, resourceType) => {\n        function browse(options = {}, memberToken) {\n            return makeApiRequest(resourceType, options, null, memberToken);\n        }\n        function read(data, options = {}, memberToken) {\n            if (!data || !data.id && !data.slug) {\n                return Promise.reject(new Error(`${name} read requires an id or slug.`));\n            }\n\n            const params = Object.assign({}, data, options);\n\n            return makeApiRequest(resourceType, params, data.id || `slug/${data.slug}`, memberToken);\n        }\n\n        return Object.assign(apiObject, {\n            [resourceType]: {\n                read,\n                browse\n            }\n        });\n    }, {});\n\n    // Settings, tiers & newsletters only have browse methods, offers only has read\n    delete api.settings.read;\n    delete api.tiers.read;\n    delete api.newsletters.read;\n    delete api.offers.browse;\n\n    return api;\n\n    function makeApiRequest(resourceType, params, id, membersToken = null) {\n        if (!membersToken && !key) {\n            return Promise.reject(\n                new Error(`${name} Config Missing: 'key' is required.`)\n            );\n        }\n        delete params.id;\n\n        const headers = membersToken ? {\n            Authorization: `GhostMembers ${membersToken}`\n        } : {};\n\n        if (userAgent) {\n            if (typeof userAgent === 'boolean') {\n                headers['User-Agent'] = `GhostContentSDK/${packageVersion}`;\n            } else {\n                headers['User-Agent'] = userAgent;\n            }\n        }\n\n        if (acceptVersionHeader) {\n            headers['Accept-Version'] = acceptVersionHeader;\n        }\n\n        params = Object.assign({key}, params);\n        const apiUrl = `${url}/${ghostPath}/api${resolveAPIPrefix(version)}${resourceType}/${id ? id + '/' : ''}`;\n\n        return makeRequest({\n            url: apiUrl,\n            method: 'get',\n            params,\n            headers\n        })\n            .then((res) => {\n                if (!Array.isArray(res.data[resourceType])) {\n                    return res.data[resourceType];\n                }\n                if (res.data[resourceType].length === 1 && !res.data.meta) {\n                    return res.data[resourceType][0];\n                }\n                return Object.assign(res.data[resourceType], {meta: res.data.meta});\n            }).catch((err) => {\n                if (err.response && err.response.data && err.response.data.errors) {\n                    const props = err.response.data.errors[0];\n                    const toThrow = new Error(props.message);\n                    const keys = Object.keys(props);\n\n                    toThrow.name = props.type;\n\n                    keys.forEach((k) => {\n                        toThrow[k] = props[k];\n                    });\n\n                    toThrow.response = err.response;\n\n                    // @TODO: remove in 2.0. We have enhanced the error handling, but we don't want to break existing implementations.\n                    toThrow.request = err.request;\n                    toThrow.config = err.config;\n\n                    throw toThrow;\n                } else {\n                    throw err;\n                }\n            });\n    }\n}\n"],"names":["USER_AGENT_DEFAULT","packageVersion","packageInfo","version","defaultAcceptVersionHeader","supportedVersions","name","resolveAPIPrefix","prefix","undefined","match","versionPrefix","exec","defaultMakeRequest","_ref","url","method","params","headers","axios","paramsSerializer","parameters","Object","keys","reduce","parts","k","val","encodeURIComponent","concat","join","GhostContentAPI","_ref2","key","host","userAgent","ghostPath","makeRequest","console","warn","Error","acceptVersionHeader","includes","test","endsWith","startsWith","api","apiObject","resourceType","browse","options","arguments","length","memberToken","makeApiRequest","read","data","id","slug","Promise","reject","assign","settings","tiers","newsletters","offers","membersToken","Authorization","apiUrl","then","res","Array","isArray","meta","catch","err","response","errors","props","toThrow","message","type","forEach","request","config"],"mappings":"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"}